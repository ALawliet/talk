{
  "name": "Washington Post",
  "database": "mongodb://localhost/original_wapo_2",
  "map": {
    "entities": {
      "assets": {
        "source": "assets",
        "fields": {
          "url": {
            "source": "url",
            "relation": "Identity",
            "type": "String"
          },
          "section": {
            "source": "section",
            "relation": "Identity",
            "type": "String"
          },
          "metadata": [
            {
              "source": "source",
              "relation": "Composed",
              "type": "String"
            },
            {
              "source": "authors",
              "relation": "Composed",
              "type": "Array"
            }
          ]
        }
      },
      "comments": {
        "source": "comments",
        "fields": {
          "author_id": {
            "source":"actor.title",
            "relation":"FindOrCreateUser",
            "type":"Object",
            "object": "actor",
            "map": {
              "fields": {
                "username": "title",
                "status": "status",
                "provider": "id",
                "metadata": [ "markers", "id", "avatar"]
              },
              "status": {
                "Untouched": "PENDING",
                "ModeratorApproved": "APPROVED",
                "ModeratorBanned": "BANNED",
                "ModearatorDeleted": "BANNED"
              }
            }
          },
          "asset_id": {
            "source":"object.context.0.uri",
            "relation":"FindOrCreateAsset",
            "type":"URL"
          },
          "body": {
            "source":"object.content",
            "relation":"Identity",
            "type":"String"
          },
          "status": {
            "source":"object.status",
            "relation":"Status",
            "type":"String",
            "status": {
              "Untouched": "NONE",
              "ModeratorApproved": "ACCEPTED",
              "ModeratorDeleted": "REJECTED",
              "CommunityFlagged": "NONE",
              "ModeratorFlagged": "NONE",
              "SystemFlagged": "REJECTED"
            }
          },
          "tags": {
            "source":"object.tags",
            "relation":"Array",
            "type":"Tags"
          },
          "parent_id": {
            "source":"targets.0.conversationID",
            "relation":"Parent",
            "type":"String",
            "search_field": "metadata.id"
          },
          "created_at": {
            "source":"postedTime",
            "relation":"Identity",
            "type":"Date"
          },
          "updated_at": {
            "source":"updated",
            "relation":"Identity",
            "type":"Date"
          },
          "metadata": {
            "relation": "Metadata",
            "fields": [
              {
                "source": "object.id",
                "relation": "Identity",
                "type": "String",
                "name": "source_id"
              }
            ]
          }
        }
      },
      "users": {
        "source": "actors",
        "fields": {
          "status": {
            "source":"status",
            "relation":"Status",
            "type":"String",
            "status": {
              "Untouched": "PENDING",
              "ModeratorApproved": "APPROVED",
              "ModeratorBanned": "BANNED",
              "ModearatorDeleted": "BANNED"
            }
          },
          "username": {
            "source": "title",
            "relation": "Identity",
            "type": "String"
          },
          "profiles": {
            "source":"_id",
            "relation": "Provider",
            "type": "Provider"
          },
          "metadata": {
            "relation": "Metadata",
            "fields": [
              {
                "source": "_id",
                "relation": "Identity",
                "type": "String"
              },
              {
                "source": "markers",
                "relation": "Identity",
                "type": "String"
              },
              {
                "source": "avatar",
                "relation": "Identity",
                "type": "String"
              }
            ]
          }
        }
      }
    }
  }
}
